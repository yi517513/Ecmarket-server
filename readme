# C2C-Market 專案

一個基於 **MERN Stack** 打造的 C2C 電商平台，支援使用者註冊、商品上架、下單購買、即時通訊與模擬付款，並整合多項第三方服務以提升使用體驗與系統安全性。

---

## 功能特色

### 用戶認證
- 使用 **JWT** 實現無狀態登入系統。
- 使用 **Redis** 儲存 `refresh token`，支援即時撤銷。
- 登入資訊儲存於 **HttpOnly Cookie**，防範 XSS/CSRF 攻擊。

### 信箱驗證
- 使用 **Nodemailer** 發送驗證碼，驗證信箱真實性。

### 商品管理
- 支援商品上架、瀏覽、詳情查看、追蹤收藏功能。

### 圖片上傳
- 使用 **AWS S3** 處理圖片上傳與儲存。

### 訂單處理
- 支援下單、查看訂單狀態。
- 整合 **ECPay API** 模擬付款流程。

### 即時通訊
- 使用 **Socket.io** 實現用戶間即時聊天與通知功能。

---

## 架構設計

### 技術棧

 類別               技術           

前端            React, Redux, Tailwind CSS 
後端            Node.js, Express 
資料庫          MongoDB        
快取/Session    Redis          
實時通訊        Socket.io      
金流整合        ECPay API      
驗證信箱        Nodemailer     
圖片儲存        AWS S3         

### 架構理念
- 使用 JWT 無狀態認證 + Redis 狀態快取，支援 Token 快速撤銷、用戶資訊快取與登入狀態管理。
- 強化安全性：採用 HttpOnly Cookies、SameSite，並避免將敏感資訊寫入 JWT。
- 將功能以模組化方式設計，利於維護與擴充。
- 將副作用以事件驅動的方式處理提高效率。

---

## 專案結構
/src 
├── config      # 環境變數與系統連線設定
├── controllers # 處理 HTTP 請求的業務控制器
├── errors      # 自訂錯誤模組與集中錯誤處理 
├── eventBus    # 事件系統 （基於 EventEmitter）
 └── handlers   # 各類事件處理器（寄信、通知、Redis 等）
├── helpers     # 常用工具函式（token、cookie 等） 
├── middlewares # Express 中間件 
 └── auth       # 驗證用戶身份
 └── multer     # 圖片上傳中介
 └── validators # 請求資料驗證
├── models      # Mongoose 資料模型 
├── redis       # Redis 操作封裝 
├── repository  # 抽象化的 CRUD 操作層
├── routes      # API 路由定義
├── services    # 各功能模組業務邏輯（auth、product、order 等）
├── sockets     # socket.io系統
 └── handlers   # 各類 socket 事件處理器
 └── helpers    # 輔助工具函式  
 └── middleware # 驗證用戶身份
└── server.js   # 伺服器入口
